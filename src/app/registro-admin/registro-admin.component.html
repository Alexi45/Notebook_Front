<div class="row">
    <div class="col s12 center">
        <h1> <b>Registro de tutor o gestor</b></h1>
    </div>
</div>

<form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>

    <div class="row">
        <div class="offset-l4 input-field col l2 s12">
            <input type="text" class="validate" name="username" [(ngModel)]="user.username" required minlength="3" maxlength="20" #username="ngModel" />
            <div class="red" *ngIf="username.errors && f.submitted">
                <div *ngIf="username.errors ['required']">El usuario es obligatorio</div>
                <div *ngIf="username.errors ['minlength']">
                    El usuario debe tener al menos 3 caracteres
                </div>
                <div *ngIf="username.errors ['maxlength']">
                    El usuario no puede tener más de 20 caracteres
                </div>
            </div>
            <label for="username">Nombre de Usuario*</label>
        </div>

        <div class="input-field col l2 s12">
            <label for="password">Contraseña*</label>
            <input type="password" class="validate" name="password" [(ngModel)]="user.password" required minlength="6" #password="ngModel" />
            <div class="red" *ngIf="password.errors && f.submitted">
                <div *ngIf="password.errors ['required']">Contraseña es obligatoria</div>
                <div *ngIf="password.errors ['minlength']">
                    Contraseña debe tener al menos 3 caracteres
                </div>
                <div *ngIf="password.errors ['maxlength']">
                    Contraseña no puede tener más de 20 caracteres
                </div>
            </div>
        </div>

        <div class="offset-l4 input-field col l2 s12">
            <input type="text" class="validate" name="email" [(ngModel)]="user.email" required email #email="ngModel" />
            <div class="red" *ngIf="email.errors && f.submitted">
                <div *ngIf="email.errors ['required']">Email es obligatorio</div>
                <div *ngIf="email.errors ['email']">
                    Email debe ser una dirección de email válida
                </div>
            </div>
            <label for="email">Email*</label>
        </div>
        <div class="input-field col l2 s12">
            <label for="location">Localización*</label>
            <input type="text" class="validate" name="Location" [(ngModel)]="user.location" required minlength="3" maxlength="20" location #location="ngModel" />
            <div class="red" *ngIf="location.errors && f.submitted">
                <div *ngIf="location.errors ['required']">La Localizacion es obligatoria</div>
                <div *ngIf="location.errors ['minlength']">
                    La Localizacion debe tener al menos 3 caracteres
                </div>
                <div *ngIf="location.errors ['maxlength']">
                    La Localizacion no puede tener más de 20 caracteres
                </div>
            </div>
        </div>

        <div class="offset-l4 input-field col l2 s12">
            <input type="text" class="validate" name="name" [(ngModel)]="user.name" required minlength="3" maxlength="20" #name="ngModel" />
            <label for="name">Nombre*</label>
            <div class="red" *ngIf="name.errors && f.submitted">
                <div *ngIf="name.errors ['required']">El Nombre es obligatorio</div>
                <div *ngIf="name.errors ['minlength']">
                    El Nombre debe tener al menos 3 caracteres
                </div>
                <div *ngIf="name.errors ['maxlength']">
                    El Nombre no puede tener más de 20 caracteres
                </div>
            </div>



        </div>


        <div class="input-field col l2 s12">
            <input type="text" class="validate" name="Apellido" [(ngModel)]="user.apellidos" required minlength="3" maxlength="20" #apellidos="ngModel" />
            <div class="red" *ngIf="apellidos.errors && f.submitted">
                <div *ngIf="apellidos.errors ['required']">Apellido es obligatorio</div>
                <div *ngIf="apellidos.errors ['minlength']">
                    Apellido debe tener al menos 3 caracteres
                </div>
                <div *ngIf="apellidos.errors ['maxlength']">
                    Apellido no puede tener más de 20 caracteres
                </div>
            </div>
            <label for="apellidos">Apellidos*</label>
        </div>


        <div class="offset-l4 input-field col l2 s12">
            <label for="center">Centro Formativo*</label>
            <input type="text" class="validate" name="center" [(ngModel)]="user.center" minlength="3" maxlength="20" required center #center="ngModel" />
            <div class="red" *ngIf="center.errors && f.submitted">
                <div *ngIf="center.errors ['required']">El centro es obligatorio</div>
                <div *ngIf="center.errors ['minlength']">
                    El Centro debe tener al menos 3 caracteres
                </div>
                <div *ngIf="center.errors ['maxlength']">
                    El Centro no puede tener más de 20 caracteres
                </div>
            </div>
        </div>

        <div class="input-field col l2 s12">
            <label for="das">DAS*</label>
            <input type="text" class="validate" name="das" [(ngModel)]="user.das" required minlength="3" maxlength="20" #das="ngModel" />
            <div class="red" *ngIf="das.errors && f.submitted">
                <div *ngIf="das.errors ['required']">El DAS es obligatoria</div>
                <div *ngIf="das.errors ['minlength']">
                    El DAS debe tener al menos 3 caracteres
                </div>
                <div *ngIf="das.errors ['maxlength']">
                    El DAS no puede tener más de 20 caracteres
                </div>
            </div>
        </div>


        <div class="offset-l4 input-field col l2 s12">
            Iniciativa
            <label for="iniciativa" class="col-form-label col-sm-2"><span id="obligatorio"> </span></label>
            <select class="browser-default" [ngModelOptions]="{standalone: true}" [(ngModel)]="user.iniciativaUser" #iniciativaUser="ngModel">
              <option *ngFor="let iniciativa of iniciativas" [ngValue]="iniciativa">
                  {{iniciativa.tituloIniciativa}}
              </option>
          </select>

        </div>


        <div class="input-field col l2 s6">
            Tipo de Usuario
            <select class="browser-default" name="u" [(ngModel)]="user.u" required minlength="2" #i="ngModel">
              <option hidden selected>Selecciona una opción</option>
              <option value="gestor">Gestor</option>
              <option value="tutor">Tutor</option>


          </select><label for="u"></label>
        </div>
    </div>

    <div class="row">
        <div class="offset-l2 input-field col l2 s12">
        </div>

        <div class="input-field col l2 s6">
            <button id="cancelar" class="btn waves-effect waves-light blue">Registrar Usuario</button>

        </div>
        <div class="input-field col l2 s6">
            <button id="cancelar" class="btn waves-effect waves-light blue " routerLink="/admin">Cancelar</button>

        </div>
        <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
            Registro fallido<br />{{ errorMessage }}
        </div>
    </div>

</form>

<div class="alert alert-success" *ngIf="isSuccessful">
    Se ha registrado correctamente!
</div>